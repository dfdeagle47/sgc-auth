define("SGAjax",[],function(){var t=require("backbone");t.getBearer=function(){return"bearer "+localStorage.token},t.getAuthorization=function(){return{Authorization:t.getBearer()}},t.setAuthorization=function(t){return localStorage.token=t},t.ajax=function(e){return e=_.defaults(e||{},{contentType:"application/json; charset=utf-8",auth:!0}),e.auth&&(delete e.auth,e.headers=_.extend(e.headers||{},t.getAuthorization())),e.data&&(e.data=JSON.stringify(e.data)),t.$.ajax.apply(t.$,arguments)}}),define("strategies/FacebookAuthModel",[],function(){var t=require("backbone");return t.Model.extend({facebookLogin:function(){var e=this,a=t.ajax({url:"/auth/facebook/login",type:"GET",auth:!1});return a.done(function(t){e.set("token",t.token,{localStorage:!0}),e.set("state","logged-in")}).fail(function(){e.clear()}),a}})}),define("strategies/GoogleAuthModel",[],function(){var t=require("backbone");return t.Model.extend({googleLogin:function(){var e=this,a=t.ajax({url:"/auth/google/login",type:"GET",auth:!1});return a.done(function(t){e.set("token",t.token,{localStorage:!0}),e.set("state","logged-in")}).fail(function(){e.clear()}),a}})}),define("strategies/LocalAuthModel",[],function(){var t=require("backbone");return t.Model.extend({localRegister:function(e){return t.ajax({url:"/auth/local/register",type:"POST",data:e,auth:!1})},localVerifyEmail:function(e){var a=this,o=t.ajax({url:"/auth/local/verify_email",type:"POST",data:e,auth:!1});return o.done(function(t){a.set("token",t.token,{localStorage:!0}),a.set("state","logged-in")}).fail(function(){a.clear()}),o},localLogin:function(e){var a=this,o=t.ajax({url:"/auth/local/login",type:"POST",data:e,auth:!1});return o.done(function(t){a.set("token",t.token,{localStorage:!0}),a.set("state","logged-in")}).fail(function(){a.clear()}),o},localChangePassword:function(e){var a=this,o=t.ajax({url:"/auth/local/change_password",type:"POST",data:e,auth:!0});return o.done(function(t){a.set("token",t.token,{localStorage:!0})}),o},localLogout:function(e){var a=t.ajax({url:"/auth/bearer/logout",type:"POST",data:e,auth:!0});return this.clear(),this.set("state","logged-out"),a},localForgotPassword:function(e){return t.ajax({url:"/auth/local/forgot_password",type:"POST",data:e,auth:!1})},localResetPassword:function(e){var a=this,o=t.ajax({url:"/auth/local/reset_password",type:"POST",data:e,auth:!1});return o.done(function(t){a.set("token",t.token,{localStorage:!0}),a.set("state","logged-in")}).fail(function(){a.clear()}),o}})}),define("AuthModel",["./strategies/FacebookAuthModel","./strategies/GoogleAuthModel","./strategies/LocalAuthModel"],function(t,e,a){var o=require("backbone"),r=o.Model.extend({sync:function(t,e,a){return a.url&&this.testUrl&&(a.url=this.testUrl+a.url,a.headers={"Access-Control-Allow-Origin":"*"}),t||(t="read"),o.Model.prototype.sync.apply(this,[t,e,a])},getLocalStorageAttributes:function(){return this._localStorageAttributes||(this._localStorageAttributes={}),this._localStorageAttributes},set:function(t,e,a){return a=_.defaults(a||{},{localStorage:!1}),a.localStorage?void(_.isString(t)&&(localStorage[t]=e,this.getLocalStorageAttributes()[t]=!0)):o.Model.prototype.set.apply(this,arguments)},has:function(t){return t in this.getLocalStorageAttributes()?!0:o.Model.prototype.has.apply(this,arguments)},get:function(t){var e=o.Model.prototype.get.apply(this,arguments);return!e&&this.getLocalStorageAttributes()[t]?localStorage[t]:e},clear:function(){var t=this.getLocalStorageAttributes();for(var e in t)delete localStorage[e];return this._localStorageAttributes={},o.Model.prototype.clear.apply(this,arguments)}});return _.extend(r,t),_.extend(r,e),_.extend(r,a),r}),define("sgc-auth",["require","./SGAjax","./AuthModel"],function(t){return t("./SGAjax"),t("./AuthModel")});