define("SGAjax",[],function(){var t=require("backbone");t.getBearer=function(){return"bearer "+localStorage.token},t.getAuthorization=function(){return{Authorization:t.getBearer()}},t.setAuthorization=function(t){return localStorage.token=t},t.ajax=function(e){return e=_.defaults(e||{},{contentType:"application/json; charset=utf-8",auth:!0}),e.auth&&(delete e.auth,e.headers=_.extend(e.headers||{},t.getAuthorization())),e.data&&(e.data=JSON.stringify(e.data)),t.$.ajax.apply(t.$,arguments)}}),define("strategies/FacebookAuthModel",[],function(){var t=require("backbone");return t.Model.extend({facebookLogin:function(){var e=this,o=t.ajax({url:"/auth/facebook/login",type:"GET",auth:!1});return o.done(function(t){e.set("token",t.token,{localStorage:!0}),e.set("state","logged-in")}).fail(function(){e.clear()}),o}})}),define("strategies/GoogleAuthModel",[],function(){var t=require("backbone");return t.Model.extend({googleLogin:function(){var e=this,o=t.ajax({url:"/auth/google/login",type:"GET",auth:!1});return o.done(function(t){e.set("token",t.token,{localStorage:!0}),e.set("state","logged-in")}).fail(function(){e.clear()}),o}})}),define("strategies/LocalAuthModel",[],function(){var t=require("backbone");return t.Model.extend({localRegister:function(e){return t.ajax({url:"/auth/local/register",type:"POST",data:e,auth:!1})},localVerifyEmail:function(e){var o=this,a=t.ajax({url:"/auth/local/verify_email",type:"POST",data:e,auth:!1});return a.done(function(t){o.set("token",t.token,{localStorage:!0}),o.set("state","logged-in")}).fail(function(){o.clear()}),a},localLogin:function(e){var o=this,a=t.ajax({url:"/auth/local/login",type:"POST",data:e,auth:!1});return a.done(function(t){o.set("token",t.token,{localStorage:!0}),o.set("state","logged-in")}).fail(function(){o.clear()}),a},localChangePassword:function(e){var o=this,a=t.ajax({url:"/auth/local/change_password",type:"POST",data:e,auth:!0});return a.done(function(t){o.set("token",t.token,{localStorage:!0})}),a},localLogout:function(e){var o=t.ajax({url:"/auth/bearer/logout",type:"POST",data:e,auth:!0});return this.clear(),this.set("state","logged-out"),o},localForgotPassword:function(e){return t.ajax({url:"/auth/local/forgot_password",type:"POST",data:e,auth:!1})},localResetPassword:function(e){var o=this,a=t.ajax({url:"/auth/local/reset_password",type:"POST",data:e,auth:!1});return a.done(function(t){o.set("token",t.token,{localStorage:!0}),o.set("state","logged-in")}).fail(function(){o.clear()}),a}})}),define("AuthModel",["./strategies/FacebookAuthModel","./strategies/GoogleAuthModel","./strategies/LocalAuthModel"],function(t,e,o){var a=require("backbone"),r=a.Model.extend({sync:function(t,e,o){return o.url&&this.testUrl&&(o.url=this.testUrl+o.url,o.headers={"Access-Control-Allow-Origin":"*"}),t||(t="read"),a.Model.prototype.sync.apply(this,[t,e,o])},getLocalStorageAttributes:function(){return this._localStorageAttributes||(this._localStorageAttributes={}),this._localStorageAttributes},set:function(t,e,o){return o=_.defaults(o||{},{localStorage:!1}),o.localStorage?void(_.isString(t)&&(localStorage[t]=e,this.getLocalStorageAttributes()[t]=!0)):a.Model.prototype.set.apply(this,arguments)},has:function(t){return t in this.getLocalStorageAttributes()?!0:a.Model.prototype.has.apply(this,arguments)},get:function(t){var e=a.Model.prototype.get.apply(this,arguments);return!e&&this.getLocalStorageAttributes()[t]?localStorage[t]:e},clear:function(){var t=this.getLocalStorageAttributes();for(var e in t)delete localStorage[e];return this._localStorageAttributes={},a.Model.prototype.clear.apply(this,arguments)}});return _.extend(r.prototype,t.prototype),_.extend(r.prototype,e.prototype),_.extend(r.prototype,o.prototype),r}),define("sgc-auth",["require","./SGAjax","./AuthModel"],function(t){return t("./SGAjax"),t("./AuthModel")});